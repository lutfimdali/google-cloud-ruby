{"id":"resourcemanager","metadata":{"name":"ResourceManager","description":"<h1 id=\"google-cloud-resource-manager\">Google Cloud Resource Manager</h1>  <p>The Resource Manager API provides methods that you can use to programmatically manage your projects in the Google Cloud Platform. You may be familiar with managing projects in the <a href=\"https://developers.google.com/console/help/new/\">Developers Console</a>. With this API you can do the following:</p>  <ul>   <li>Get a list of all projects associated with an account</li>   <li>Create new projects</li>   <li>Update existing projects</li>   <li>Delete projects</li>   <li>Undelete, or recover, projects that you don’t want to delete</li> </ul>  <p>The Resource Manager API is a Beta release and is not covered by any SLA or deprecation policy and may be subject to backward-incompatible changes.</p>  <h2 id=\"accessing-the-service\">Accessing the Service</h2>  <p>Currently, the full functionality of the Resource Manager API is available only to whitelisted users. (Contact your account manager or a member of the Google Cloud sales team if you are interested in access.) Read-only methods such as ResourceManager::Manager#projects and ResourceManager::Manager#project are accessible to any user who enables the Resource Manager API in the <a href=\"https://console.developers.google.com\">Developers Console</a>.</p>  <h2 id=\"authentication\">Authentication</h2>  <p>The Resource Manager API currently requires authentication of a <a href=\"https://developers.google.com/identity/protocols/OAuth2\">User Account</a>, and cannot currently be accessed with a <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount\">Service Account</a>. To use a User Account install the <a href=\"http://cloud.google.com/sdk\">Google Cloud SDK</a> and authenticate with the following:</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code>$ gcloud auth login </code></pre> </div>  <p>Also make sure all <code class=\"highlighter-rouge\">GCLOUD</code> environment variables are cleared of any service accounts. Then gcloud will be able to detect the user authentication and connect with those credentials.</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> </code></pre> </div>  <h2 id=\"listing-projects\">Listing Projects</h2>  <p>Project is a collection of settings, credentials, and metadata about the application or applications you’re working on. You can retrieve and inspect all projects that you have permissions to. (See Manager#projects)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">projects</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">project</span><span class=\"o\">|</span>   <span class=\"nb\">puts</span> <span class=\"n\">projects</span><span class=\"p\">.</span><span class=\"nf\">project_id</span> <span class=\"k\">end</span> </code></pre> </div>  <h2 id=\"managing-projects-with-labels\">Managing Projects with Labels</h2>  <p>Labels can be added to or removed from projects. (See Project#labels)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">project</span> <span class=\"s2\">\"tokyo-rain-123\"</span> <span class=\"c1\"># Label the project as production</span> <span class=\"n\">project</span><span class=\"p\">.</span><span class=\"nf\">update</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"nb\">p</span><span class=\"o\">|</span>   <span class=\"nb\">p</span><span class=\"p\">.</span><span class=\"nf\">labels</span><span class=\"p\">[</span><span class=\"s2\">\"env\"</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s2\">\"production\"</span> <span class=\"k\">end</span> </code></pre> </div>  <p>Projects can then be filtered by labels. (See Manager#projects)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"c1\"># Find only the productions projects</span> <span class=\"n\">projects</span> <span class=\"o\">=</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">projects</span> <span class=\"ss\">filter: </span><span class=\"s2\">\"labels.env:production\"</span> <span class=\"n\">projects</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">project</span><span class=\"o\">|</span>   <span class=\"nb\">puts</span> <span class=\"n\">project</span><span class=\"p\">.</span><span class=\"nf\">project_id</span> <span class=\"k\">end</span> </code></pre> </div>  <h2 id=\"creating-a-project\">Creating a Project</h2>  <p>You can also use the API to create new projects. (See Manager#create_project)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">create_project</span> <span class=\"s2\">\"tokyo-rain-123\"</span><span class=\"p\">,</span>                                           <span class=\"ss\">name: </span><span class=\"s2\">\"Todos Development\"</span><span class=\"p\">,</span>                                           <span class=\"ss\">labels: </span><span class=\"p\">{</span><span class=\"ss\">env: :development</span><span class=\"p\">}</span> </code></pre> </div>  <h2 id=\"deleting-a-project\">Deleting a Project</h2>  <p>You can delete projects when they are no longer needed. (See Manager#delete and Project#delete)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">delete</span> <span class=\"s2\">\"tokyo-rain-123\"</span> </code></pre> </div>  <h2 id=\"undeleting-a-project\">Undeleting a Project</h2>  <p>You can also restore a deleted project within the waiting period that starts when the project was deleted. Restoring a project returns it to the state it was in prior to being deleted. (See Manager#undelete and Project#undelete)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">undelete</span> <span class=\"s2\">\"tokyo-rain-123\"</span> </code></pre> </div>  <h2 id=\"managing-iam-policies\">Managing IAM Policies</h2>  <p>Google Cloud Identity and Access Management (<a href=\"https://cloud.google.com/iam/\">Cloud IAM</a>) access control policies can be managed on projects. These policies allow project owners to manage <em>who</em> (identity) has access to <em>what</em> (role). See <a href=\"https://cloud.google.com/iam/docs/overview\">Cloud IAM Overview</a> for more information.</p>  <p>A project’s access control policy can be retrieved. (See Project#policy)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">project</span> <span class=\"s2\">\"tokyo-rain-123\"</span> <span class=\"n\">policy</span> <span class=\"o\">=</span> <span class=\"n\">project</span><span class=\"p\">.</span><span class=\"nf\">policy</span> </code></pre> </div>  <p>A project’s access control policy can also be set. (See Project#policy=)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">project</span> <span class=\"s2\">\"tokyo-rain-123\"</span>  <span class=\"n\">viewer_policy</span> <span class=\"o\">=</span> <span class=\"p\">{</span>   <span class=\"s2\">\"bindings\"</span> <span class=\"o\">=&gt;</span> <span class=\"p\">[{</span>     <span class=\"s2\">\"role\"</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"roles/viewer\"</span><span class=\"p\">,</span>     <span class=\"s2\">\"members\"</span> <span class=\"o\">=&gt;</span> <span class=\"p\">[</span><span class=\"s2\">\"serviceAccount:your-service-account\"</span><span class=\"p\">]</span>   <span class=\"p\">}]</span> <span class=\"p\">}</span> <span class=\"n\">project</span><span class=\"p\">.</span><span class=\"nf\">policy</span> <span class=\"o\">=</span> <span class=\"n\">viewer_policy</span> </code></pre> </div>  <p>And permissions can be tested on a project. (See Project#test_permissions)</p>  <div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>  <span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"n\">resource_manager</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">resource_manager</span> <span class=\"n\">project</span> <span class=\"o\">=</span> <span class=\"n\">resource_manager</span><span class=\"p\">.</span><span class=\"nf\">project</span> <span class=\"s2\">\"tokyo-rain-123\"</span> <span class=\"n\">perms</span> <span class=\"o\">=</span> <span class=\"n\">project</span><span class=\"p\">.</span><span class=\"nf\">test_permissions</span> <span class=\"s2\">\"resourcemanager.projects.get\"</span><span class=\"p\">,</span>                                  <span class=\"s2\">\"resourcemanager.projects.delete\"</span> <span class=\"n\">perms</span><span class=\"p\">.</span><span class=\"nf\">include?</span> <span class=\"s2\">\"resourcemanager.projects.get\"</span>    <span class=\"c1\">#=&gt; true</span> <span class=\"n\">perms</span><span class=\"p\">.</span><span class=\"nf\">include?</span> <span class=\"s2\">\"resourcemanager.projects.delete\"</span> <span class=\"c1\">#=&gt; false</span> </code></pre> </div>  <p>For more information about using access control policies see <a href=\"https://cloud.google.com/iam/docs/managing-policies\">Managing Policies</a>.</p>","source":"lib/gcloud/resource_manager.rb#L250","resources":[],"examples":[]},"methods":[]}