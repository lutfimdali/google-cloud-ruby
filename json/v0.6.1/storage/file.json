{"id":"file","metadata":{"name":"File","description":"<h1 id=\"file\">File</h1>\n\n<p>Represents a File\n(<a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects\">Object</a>) that\nbelongs to a {Bucket}. Files (Objects) are\nthe individual pieces of data that you store in Google Cloud Storage. A\nfile can be up to 5 TB in size. Files have two components:\ndata and metadata. The data component is the data from an external file or\nother data source that you want to store in Google Cloud Storage. The\nmetadata component is a collection of name-value pairs that describe\nvarious qualities of the data.</p>","source":"lib/gcloud/storage/file.rb#L49","resources":[{"title":"Concepts\nand Techniques","link":"https://cloud.google.com/storage/docs/concepts-techniques"}],"examples":[{"caption":null,"code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\""}]},"methods":[{"metadata":{"name":"kind","description":"<p>The kind of item this is.\nFor files, this is always storage#object.</p>","source":"lib/gcloud/storage/file.rb#L68","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"id","description":"<p>The ID of the file.</p>","source":"lib/gcloud/storage/file.rb#L74","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"name","description":"<p>The name of this file.</p>","source":"lib/gcloud/storage/file.rb#L80","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"bucket","description":"<p>The name of the {Bucket} containing this file.</p>","source":"lib/gcloud/storage/file.rb#L86","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"generation","description":"<p>The content generation of this file.\nUsed for object versioning.</p>","source":"lib/gcloud/storage/file.rb#L93","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"metageneration","description":"<p>The version of the metadata for this file at this generation.\nUsed for preconditions and for detecting changes in metadata.\nA metageneration number is only meaningful in the context of a\nparticular generation of a particular file.</p>","source":"lib/gcloud/storage/file.rb#L102","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"api_url","description":"<p>A URL that can be used to access the file using the REST API.</p>","source":"lib/gcloud/storage/file.rb#L108","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"media_url","description":"<p>A URL that can be used to download the file using the REST API.</p>","source":"lib/gcloud/storage/file.rb#L114","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"size","description":"<p>Content-Length of the data in bytes.</p>","source":"lib/gcloud/storage/file.rb#L120","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"created_at","description":"<p>Creation time of the file.</p>","source":"lib/gcloud/storage/file.rb#L126","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"updated_at","description":"<p>The creation or modification time of the file.\nFor buckets with versioning enabled, changing an object’s\nmetadata does not change this property.</p>","source":"lib/gcloud/storage/file.rb#L134","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"md5","description":"<p>MD5 hash of the data; encoded using base64.</p>","source":"lib/gcloud/storage/file.rb#L140","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"crc32c","description":"<p>The CRC32c checksum of the data, as described in\n<a href=\"http://tools.ietf.org/html/rfc4960#appendix-B\">RFC 4960, Appendix B</a>.\nEncoded using base64 in big-endian byte order.</p>","source":"lib/gcloud/storage/file.rb#L148","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"etag","description":"<p>HTTP 1.1 Entity tag for the file.</p>","source":"lib/gcloud/storage/file.rb#L154","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"cache_control","description":"<p>The <a href=\"https://tools.ietf.org/html/rfc7234#section-5.2\">Cache-Control</a>\ndirective for the file data.</p>","source":"lib/gcloud/storage/file.rb#L161","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"cache_control=","description":"<p>Updates the\n<a href=\"https://tools.ietf.org/html/rfc7234#section-5.2\">Cache-Control</a>\ndirective for the file data.</p>","source":"lib/gcloud/storage/file.rb#L169","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_disposition","description":"<p>The <a href=\"https://tools.ietf.org/html/rfc6266\">Content-Disposition</a> of the\nfile data.</p>","source":"lib/gcloud/storage/file.rb#L176","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_disposition=","description":"<p>Updates the <a href=\"https://tools.ietf.org/html/rfc6266\">Content-Disposition</a>\nof the file data.</p>","source":"lib/gcloud/storage/file.rb#L183","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_encoding","description":"<p>The <a href=\"https://tools.ietf.org/html/rfc7231#section-3.1.2.2\">Content-Encoding\n</a> of the file data.</p>","source":"lib/gcloud/storage/file.rb#L190","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_encoding=","description":"<p>Updates the <a href=\"https://tools.ietf.org/html/rfc7231#section-3.1.2.2\">Content-Encoding\n</a> of the file data.</p>","source":"lib/gcloud/storage/file.rb#L197","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_language","description":"<p>The <a href=\"http://tools.ietf.org/html/bcp47\">Content-Language</a> of the file\ndata.</p>","source":"lib/gcloud/storage/file.rb#L204","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_language=","description":"<p>Updates the <a href=\"http://tools.ietf.org/html/bcp47\">Content-Language</a> of the\nfile data.</p>","source":"lib/gcloud/storage/file.rb#L211","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_type","description":"<p>The <a href=\"https://tools.ietf.org/html/rfc2616#section-14.17\">Content-Type</a> of\nthe file data.</p>","source":"lib/gcloud/storage/file.rb#L218","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"content_type=","description":"<p>Updates the\n<a href=\"https://tools.ietf.org/html/rfc2616#section-14.17\">Content-Type</a> of the\nfile data.</p>","source":"lib/gcloud/storage/file.rb#L226","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"metadata","description":"<p>A hash of custom, user-provided web-safe keys and arbitrary string\nvalues that will returned with requests for the file as “x-goog-meta-“\nresponse headers.</p>","source":"lib/gcloud/storage/file.rb#L234","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"metadata=","description":"<p>Updates the hash of custom, user-provided web-safe keys and arbitrary\nstring values that will returned with requests for the file as\n“x-goog-meta-“ response headers.</p>","source":"lib/gcloud/storage/file.rb#L244","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"update","description":"<p>Updates the file with changes made in the given block in a single\nPATCH request. The following attributes may be set: {#cache_control=},\n{#content_disposition=}, {#content_encoding=}, {#content_language=},\n{#content_type=}, and {#metadata=}. The {#metadata} hash accessible in\nthe block is completely mutable and will be included in the request.</p>","source":"lib/gcloud/storage/file.rb#L275","resources":[],"examples":[{"caption":null,"code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\n\nfile.update do |f|\n  f.cache_control = \"private, max-age=0, no-cache\"\n  f.content_disposition = \"inline; filename=filename.ext\"\n  f.content_encoding = \"deflate\"\n  f.content_language = \"de\"\n  f.content_type = \"application/json\"\n  f.metadata[\"player\"] = \"Bob\"\n  f.metadata[\"score\"] = \"10\"\nend"}]},"params":[{"name":"yield","types":["block"],"description":null,"optional":true,"nullable":false}],"exceptions":[],"returns":[]},{"metadata":{"name":"download","description":"<p>Download the file’s contents to a local file.</p>\n\n<p>By default, the download is verified by calculating the MD5 digest.</p>","source":"lib/gcloud/storage/file.rb#L343","resources":[],"examples":[{"caption":null,"code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\""},{"caption":"Use the CRC32c digest by passing :crc32c.","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\", verify: :crc32c"},{"caption":"Use the MD5 and CRC32c digests by passing :all.","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\", verify: :all"},{"caption":"Disable the download verification by passing :none.","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\", verify: :none"}]},"params":[{"name":"path","types":["String"],"description":"The path on the local file system to write the data\nto. The path provided must be writable.","optional":false,"nullable":false},{"name":"verify","types":["Symbol"],"description":"The verification algoruthm used to ensure the\ndownloaded file contents are correct. Default is <code class=\"highlighter-rouge\">:md5</code>.</p>\n\n<p>Acceptable values are:\n* <code class=\"highlighter-rouge\">md5</code> - Verify file content match using the MD5 hash.\n* <code class=\"highlighter-rouge\">crc32c</code> - Verify file content match using the CRC32c hash.\n* <code class=\"highlighter-rouge\">all</code> - Perform all available file content verification.\n* <code class=\"highlighter-rouge\">none</code> - Don’t perform file content verification.","optional":true,"default":":md5","nullable":false}],"exceptions":[],"returns":[{"types":["File"],"description":"Returns a <code class=\"highlighter-rouge\">::File</code> object on the local file system"}]},{"metadata":{"name":"copy","description":"<p>Copy the file to a new location.</p>","source":"lib/gcloud/storage/file.rb#L412","resources":[],"examples":[{"caption":"The file can be copied to a new path in the current bucket:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.copy \"path/to/destination/file.ext\""},{"caption":"The file can also be copied to a different bucket:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.copy \"new-destination-bucket\",\n          \"path/to/destination/file.ext\""},{"caption":"The file can also be copied by specifying a generation:","code":"file.copy \"copy/of/previous/generation/file.ext\",\n          generation: 123456"}]},"params":[{"name":"dest_bucket_or_path","types":["String"],"description":"Either the bucket to copy the file\nto, or the path to copy the file to in the current bucket.","optional":false,"nullable":false},{"name":"dest_path","types":["String"],"description":"If a bucket was provided in the first\nparameter, this contains the path to copy the file to in the given\nbucket.","optional":true,"default":"nil","nullable":true},{"name":"acl","types":["String"],"description":"A predefined set of access controls to apply to new\nfile.</p>\n\n<p>Acceptable values are:\n* <code class=\"highlighter-rouge\">auth</code>, <code class=\"highlighter-rouge\">auth_read</code>, <code class=\"highlighter-rouge\">authenticated</code>, <code class=\"highlighter-rouge\">authenticated_read</code>,\n  <code class=\"highlighter-rouge\">authenticatedRead</code> - File owner gets OWNER access, and\n  allAuthenticatedUsers get READER access.\n* <code class=\"highlighter-rouge\">owner_full</code>, <code class=\"highlighter-rouge\">bucketOwnerFullControl</code> - File owner gets OWNER\n  access, and project team owners get OWNER access.\n* <code class=\"highlighter-rouge\">owner_read</code>, <code class=\"highlighter-rouge\">bucketOwnerRead</code> - File owner gets OWNER access, and\n  project team owners get READER access.\n* <code class=\"highlighter-rouge\">private</code> - File owner gets OWNER access.\n* <code class=\"highlighter-rouge\">project_private</code>, <code class=\"highlighter-rouge\">projectPrivate</code> - File owner gets OWNER access,\n  and project team members get access according to their roles.\n* <code class=\"highlighter-rouge\">public</code>, <code class=\"highlighter-rouge\">public_read</code>, <code class=\"highlighter-rouge\">publicRead</code> - File owner gets OWNER\n  access, and allUsers get READER access.","optional":true,"default":"nil","nullable":true},{"name":"generation","types":["Integer"],"description":"Select a specific revision of the file to\ncopy. The default is the latest version.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["Gcloud::Storage::File"],"description":null}]},{"metadata":{"name":"delete","description":"<p>Permanently deletes the file.</p>","source":"lib/gcloud/storage/file.rb#L443","resources":[],"examples":[{"caption":null,"code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.delete"}]},"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code class=\"highlighter-rouge\">true</code> if the file was deleted."}]},{"metadata":{"name":"public_url","description":"<p>Public URL to access the file. If the file is not public, requests to\nthe URL will return an error. (See {File::Acl#public!} and\n{Bucket::DefaultAcl#public!}) To share a file that is not public see\n{#signed_url}.</p>","source":"lib/gcloud/storage/file.rb#L485","resources":[{"title":"Accessing\nPublic Data","link":"https://cloud.google.com/storage/docs/access-public-data"}],"examples":[{"caption":null,"code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\npublic_url = file.public_url"},{"caption":"Generate the URL with a protocol other than HTTPS:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\npublic_url = file.public_url protocol: \"http\""}]},"params":[{"name":"protocol","types":["String"],"description":"The protocol to use for the URL. Default is\n<code class=\"highlighter-rouge\">HTTPS</code>.","optional":true,"default":":https","nullable":false}],"exceptions":[],"returns":[]},{"metadata":{"name":"signed_url","description":"<p>Access without authentication can be granted to a File for a specified\nperiod of time. This URL uses a cryptographic signature\nof your credentials to access the file.</p>\n\n<p>Generating a URL requires service account credentials, either by\nconnecting with a service account when calling {Gcloud.storage}, or by\npassing in the service account <code class=\"highlighter-rouge\">issuer</code> and <code class=\"highlighter-rouge\">signing_key</code> values.\nAlthough the private key can be passed as a string for convenience,\ncreating and storing an instance of <code class=\"highlighter-rouge\">OpenSSL::PKey::RSA</code> is more\nefficient when making multiple calls to <code class=\"highlighter-rouge\">signed_url</code>.</p>\n\n<p>A SignedUrlUnavailable is raised if the service account credentials are\nmissing. Service account credentials are acquired by following the steps\nin <a href=\"https://cloud.google.com/storage/docs/authentication#service_accounts\">Service Account Authentication</a>.</p>","source":"lib/gcloud/storage/file.rb#L559","resources":[{"title":"Access Control Signed URLs guide","link":"https://cloud.google.com/storage/docs/access-control#Signed-URLs"}],"examples":[{"caption":null,"code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nshared_url = file.signed_url"},{"caption":"Any of the option parameters may be specified:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nshared_url = file.signed_url method: \"GET\",\n                             expires: 300 # 5 minutes from now"},{"caption":"Using the <code class=\"highlighter-rouge\">issuer</code> and <code class=\"highlighter-rouge\">signing_key</code> options:","code":"require \"gcloud/storage\"\n\nstorage = Gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nkey = OpenSSL::PKey::RSA.new \"-----BEGIN PRIVATE KEY-----\\n...\"\nshared_url = file.signed_url issuer: \"service-account@gcloud.com\",\n                             signing_key: key"}]},"params":[{"name":"method","types":["String"],"description":"The HTTP verb to be used with the signed URL.\nSigned URLs can be used\nwith <code class=\"highlighter-rouge\">GET</code>, <code class=\"highlighter-rouge\">HEAD</code>, <code class=\"highlighter-rouge\">PUT</code>, and <code class=\"highlighter-rouge\">DELETE</code> requests. Default is <code class=\"highlighter-rouge\">GET</code>.","optional":true,"default":"nil","nullable":true},{"name":"expires","types":["Integer"],"description":"The number of seconds until the URL expires.\nDefault is 300/5 minutes.","optional":true,"default":"nil","nullable":true},{"name":"content_type","types":["String"],"description":"When provided, the client (browser) must\nsend this value in the HTTP header. e.g. <code class=\"highlighter-rouge\">text/plain</code>","optional":true,"default":"nil","nullable":true},{"name":"content_md5","types":["String"],"description":"The MD5 digest value in base64. If you\nprovide this in the string, the client (usually a browser) must\nprovide this HTTP header with this same value in its request.","optional":true,"default":"nil","nullable":true},{"name":"issuer","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"client_email","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"signing_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true},{"name":"private_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[]},{"metadata":{"name":"acl","description":"<p>The {File::Acl} instance used to control access to the file.</p>\n\n<p>A file has owners, writers, and readers. Permissions can be granted to\nan individual user’s email address, a group’s email address,  as well as\nmany predefined lists.</p>","source":"lib/gcloud/storage/file.rb#L616","resources":[{"title":"Access Control\nguide","link":"https://cloud.google.com/storage/docs/access-control"}],"examples":[{"caption":"Grant access to a user by pre-pending <code class=\"highlighter-rouge\">\"user-\"</code> to an email:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\n\nemail = \"heidi@example.net\"\nfile.acl.add_reader \"user-#{email}\""},{"caption":"Grant access to a group by pre-pending <code class=\"highlighter-rouge\">\"group-\"</code> to an email:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\n\nemail = \"authors@example.net\"\nfile.acl.add_reader \"group-#{email}\""},{"caption":"Or, grant access via a predefined permissions list:","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nstorage = gcloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\n\nfile.acl.public!"}]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"reload!","description":"<p>Reloads the file with current data from the Storage service.</p>","source":"lib/gcloud/storage/file.rb#L622","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"ensure_connection!","description":"<p>Raise an error unless an active connection is available.</p>","source":"lib/gcloud/storage/file.rb#L653","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"patch_gapi!","description":"","source":"lib/gcloud/storage/file.rb#L657","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"fix_copy_args","description":"","source":"lib/gcloud/storage/file.rb#L667","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"verify_file!","description":"","source":"lib/gcloud/storage/file.rb#L681","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[]}]}