{"id":"project","metadata":{"name":"Project","title":["Gcloud","Bigquery","Project"],"description":"<h1 id=\"project\">Project</h1>\n\n<p>Projects are top-level containers in Google Cloud Platform. They store\ninformation about billing and authorized users, and they contain BigQuery\ndata. Each project has a friendly name and a unique ID.</p>\n\n<p>Gcloud::Bigquery::Project is the main object for interacting with\nGoogle BigQuery. <a data-custom-type=\"bigquery/dataset\">Gcloud::Bigquery::Dataset</a> objects are created,\naccessed, and deleted by Gcloud::Bigquery::Project.</p>\n\n<p>See <a data-custom-type=\"gcloud#bigquery\">Gcloud#bigquery</a></p>","source":"lib/gcloud/bigquery/project.rb#L47","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.table \"my_table\""}]},"methods":[{"metadata":{"name":"initialize","title":["Gcloud","Bigquery","Project#initialize"],"description":"<p>Creates a new Connection instance.</p>\n\n<p>See <a data-custom-type=\"gcloud.bigquery\">Gcloud.bigquery</a></p>","source":"lib/gcloud/bigquery/project.rb#L56","resources":[],"examples":[]},"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery/project\">Project</a>"],"description":"a new instance of Project"}]},{"metadata":{"name":"project","title":["Gcloud","Bigquery","Project#project"],"description":"<p>The BigQuery project connected to.</p>","source":"lib/gcloud/bigquery/project.rb#L73","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new \"my-todo-project\", \"/path/to/keyfile.json\"\nbigquery = gcloud.bigquery\n\nbigquery.project #=> \"my-todo-project\""}]},"params":[],"exceptions":[],"returns":[]},{"metadata":{"name":"query_job","title":["Gcloud","Bigquery","Project#query_job"],"description":"<p>Queries data using the <a href=\"https://cloud.google.com/bigquery/querying-data\">asynchronous\nmethod</a>.</p>","source":"lib/gcloud/bigquery/project.rb#L146","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\njob = bigquery.query_job \"SELECT name FROM [my_proj:my_data.my_table]\"\n\njob.wait_until_done!\nif !job.failed?\n  job.query_results.each do |row|\n    puts row[\"name\"]\n  end\nend"}]},"params":[{"name":"query","types":["String"],"description":"A query string, following the BigQuery <a href=\"https://cloud.google.com/bigquery/query-reference\">query\nsyntax</a>, of the\nquery to execute. Example: “SELECT count(f1) FROM\n[myProjectId:myDatasetId.myTableId]”.","optional":false,"nullable":false},{"name":"priority","types":["String"],"description":"Specifies a priority for the query. Possible\nvalues include <code class=\"highlighter-rouge\">INTERACTIVE</code> and <code class=\"highlighter-rouge\">BATCH</code>. The default value is\n<code class=\"highlighter-rouge\">INTERACTIVE</code>.","optional":true,"default":"\"INTERACTIVE\"","nullable":false},{"name":"cache","types":["Boolean"],"description":"Whether to look for the result in the query\ncache. The query cache is a best-effort cache that will be flushed\nwhenever tables in the query are modified. The default value is true.\nFor more information, see <a href=\"https://developers.google.com/bigquery/querying-data\">query\ncaching</a>.","optional":true,"default":"true","nullable":false},{"name":"table","types":["Table"],"description":"The destination table where the query results\nshould be stored. If not present, a new table will be created to store\nthe results.","optional":true,"default":"nil","nullable":true},{"name":"create","types":["String"],"description":"Specifies whether the job is allowed to create\nnew tables.</p>\n\n<p>The following values are supported:\n* <code class=\"highlighter-rouge\">needed</code> - Create the table if it does not exist.\n* <code class=\"highlighter-rouge\">never</code> - The table must already exist. A ‘notFound’ error is\n  raised if the table does not exist.","optional":true,"default":"nil","nullable":true},{"name":"write","types":["String"],"description":"Specifies the action that occurs if the\ndestination table already exists.</p>\n\n<p>The following values are supported:\n* <code class=\"highlighter-rouge\">truncate</code> - BigQuery overwrites the table data.\n* <code class=\"highlighter-rouge\">append</code> - BigQuery appends the data to the table.\n* <code class=\"highlighter-rouge\">empty</code> - A ‘duplicate’ error is returned in the job result if the\n  table exists and contains data.","optional":true,"default":"nil","nullable":true},{"name":"large_results","types":["Boolean"],"description":"If <code class=\"highlighter-rouge\">true</code>, allows the query to produce\narbitrarily large result tables at a slight cost in performance.\nRequires <code class=\"highlighter-rouge\">table</code> parameter to be set.","optional":true,"default":"nil","nullable":true},{"name":"flatten","types":["Boolean"],"description":"Flattens all nested and repeated fields in the\nquery results. The default value is <code class=\"highlighter-rouge\">true</code>. <code class=\"highlighter-rouge\">large_results</code> parameter\nmust be <code class=\"highlighter-rouge\">true</code> if this is set to <code class=\"highlighter-rouge\">false</code>.","optional":true,"default":"nil","nullable":true},{"name":"dataset","types":["Dataset","String"],"description":"Specifies the default dataset to use\nfor unqualified table names in the query.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery/queryjob\">Gcloud::Bigquery::QueryJob</a>"],"description":null}]},{"metadata":{"name":"query","title":["Gcloud","Bigquery","Project#query"],"description":"<p>Queries data using the <a href=\"https://cloud.google.com/bigquery/querying-data\">synchronous\nmethod</a>.</p>","source":"lib/gcloud/bigquery/project.rb#L211","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndata = bigquery.query \"SELECT name FROM [my_proj:my_data.my_table]\"\ndata.each do |row|\n  puts row[\"name\"]\nend"}]},"params":[{"name":"query","types":["String"],"description":"A query string, following the BigQuery <a href=\"https://cloud.google.com/bigquery/query-reference\">query\nsyntax</a>, of the\nquery to execute. Example: “SELECT count(f1) FROM\n[myProjectId:myDatasetId.myTableId]”.","optional":false,"nullable":false},{"name":"max","types":["Integer"],"description":"The maximum number of rows of data to return per\npage of results. Setting this flag to a small value such as 1000 and\nthen paging through results might improve reliability when the query\nresult set is large. In addition to this limit, responses are also\nlimited to 10 MB. By default, there is no maximum row count, and only\nthe byte limit applies.","optional":true,"default":"nil","nullable":true},{"name":"timeout","types":["Integer"],"description":"How long to wait for the query to complete, in\nmilliseconds, before the request times out and returns. Note that this\nis only a timeout for the request, not the query. If the query takes\nlonger to run than the timeout value, the call returns without any\nresults and with QueryData#complete? set to false. The default value\nis 10000 milliseconds (10 seconds).","optional":true,"default":"10000","nullable":false},{"name":"dryrun","types":["Boolean"],"description":"If set to <code class=\"highlighter-rouge\">true</code>, BigQuery doesn’t run the job.\nInstead, if the query is valid, BigQuery returns statistics about the\njob such as how many bytes would be processed. If the query is\ninvalid, an error returns. The default value is <code class=\"highlighter-rouge\">false</code>.","optional":true,"default":"nil","nullable":true},{"name":"cache","types":["Boolean"],"description":"Whether to look for the result in the query\ncache. The query cache is a best-effort cache that will be flushed\nwhenever tables in the query are modified. The default value is true.\nFor more information, see <a href=\"https://developers.google.com/bigquery/querying-data\">query\ncaching</a>.","optional":true,"default":"true","nullable":false},{"name":"dataset","types":["String"],"description":"Specifies the default datasetId and projectId to\nassume for any unqualified table names in the query. If not set, all\ntable names in the query string must be qualified in the format\n‘datasetId.tableId’.","optional":true,"default":"nil","nullable":true},{"name":"project","types":["String"],"description":"Specifies the default projectId to assume for\nany unqualified table names in the query. Only used if <code class=\"highlighter-rouge\">dataset</code>\noption is set.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery/querydata\">Gcloud::Bigquery::QueryData</a>"],"description":null}]},{"metadata":{"name":"dataset","title":["Gcloud","Bigquery","Project#dataset"],"description":"<p>Retrieves an existing dataset by ID.</p>","source":"lib/gcloud/bigquery/project.rb#L241","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndataset = bigquery.dataset \"my_dataset\"\nputs dataset.name"}]},"params":[{"name":"dataset_id","types":["String"],"description":"The ID of a dataset.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery/dataset\">Gcloud::Bigquery::Dataset</a>","nil"],"description":"Returns <code class=\"highlighter-rouge\">nil</code> if the dataset\ndoes not exist."}]},{"metadata":{"name":"create_dataset","title":["Gcloud","Bigquery","Project#create_dataset"],"description":"<p>Creates a new dataset.</p>","source":"lib/gcloud/bigquery/project.rb#L308","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndataset = bigquery.create_dataset \"my_dataset\""},{"caption":"<p>A name and description can be provided:</p>","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndataset = bigquery.create_dataset \"my_dataset\",\n                                  name: \"My Dataset\",\n                                  description: \"This is my Dataset\""},{"caption":"<p>Access rules can be provided with the <code class=\"highlighter-rouge\">access</code> option:</p>","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndataset = bigquery.create_dataset \"my_dataset\",\n  access: [{\"role\"=>\"WRITER\", \"userByEmail\"=>\"writers@example.com\"}]"},{"caption":"<p>Or, configure access with a block: (See <a data-custom-type=\"bigquery/dataset/access\">Dataset::Access</a>)</p>","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndataset = bigquery.create_dataset \"my_dataset\" do |access|\n  access.add_writer_user \"writers@example.com\"\nend"}]},"params":[{"name":"dataset_id","types":["String"],"description":"A unique ID for this dataset, without the\nproject name. The ID must contain only letters (a-z, A-Z), numbers\n(0-9), or underscores (_). The maximum length is 1,024 characters.","optional":false,"nullable":false},{"name":"name","types":["String"],"description":"A descriptive name for the dataset.","optional":true,"default":"nil","nullable":true},{"name":"description","types":["String"],"description":"A user-friendly description of the dataset.","optional":true,"default":"nil","nullable":true},{"name":"expiration","types":["Integer"],"description":"The default lifetime of all tables in the\ndataset, in milliseconds. The minimum value is 3600000 milliseconds\n(one hour).","optional":true,"default":"nil","nullable":true},{"name":"access","types":["Array<Hash>"],"description":"The access rules for a Dataset using the\nGoogle Cloud Datastore API data structure of an array of hashes. See\n<a href=\"https://cloud.google.com/bigquery/access-control\">BigQuery Access\nControl</a> for more\ninformation.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery/dataset\">Gcloud::Bigquery::Dataset</a>"],"description":null}]},{"metadata":{"name":"datasets","title":["Gcloud","Bigquery","Project#datasets"],"description":"<p>Retrieves the list of datasets belonging to the project.</p>","source":"lib/gcloud/bigquery/project.rb#L374","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\ndatasets = bigquery.datasets\ndatasets.each do |dataset|\n  puts dataset.name\nend"},{"caption":"<p>Retrieve all datasets, including hidden ones, with <code class=\"highlighter-rouge\">:all</code>:</p>","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\nall_datasets = bigquery.datasets, all: true"},{"caption":"<p>With pagination: (See <a data-custom-type=\"bigquery/dataset/list#token\">Dataset::List#token</a>)</p>","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\nall_datasets = []\ntmp_datasets = bigquery.datasets\nwhile tmp_datasets.any? do\n  tmp_datasets.each do |dataset|\n    all_datasets << dataset\n  end\n  # break loop if no more datasets available\n  break if tmp_datasets.token.nil?\n  # get the next group of datasets\n  tmp_datasets = bigquery.datasets token: tmp_datasets.token\nend"}]},"params":[{"name":"all","types":["Boolean"],"description":"Whether to list all datasets, including hidden\nones. The default is <code class=\"highlighter-rouge\">false</code>.","optional":true,"default":"nil","nullable":true},{"name":"token","types":["String"],"description":"A previously-returned page token representing part\nof the larger set of results to view.","optional":true,"default":"nil","nullable":true},{"name":"max","types":["Integer"],"description":"Maximum number of datasets to return.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"bigquery/dataset\">Gcloud::Bigquery::Dataset</a>&gt;"],"description":"(See\n<a data-custom-type=\"bigquery/dataset/list\">Gcloud::Bigquery::Dataset::List</a>)"}]},{"metadata":{"name":"job","title":["Gcloud","Bigquery","Project#job"],"description":"<p>Retrieves an existing job by ID.</p>","source":"lib/gcloud/bigquery/project.rb#L401","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\njob = bigquery.job \"my_job\""}]},"params":[{"name":"job_id","types":["String"],"description":"The ID of a job.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery/job\">Gcloud::Bigquery::Job</a>","nil"],"description":"Returns <code class=\"highlighter-rouge\">nil</code> if the job does not\nexist."}]},{"metadata":{"name":"jobs","title":["Gcloud","Bigquery","Project#jobs"],"description":"<p>Retrieves the list of jobs belonging to the project.</p>","source":"lib/gcloud/bigquery/project.rb#L466","resources":[],"examples":[{"caption":"","code":"require \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\njobs = bigquery.jobs"},{"caption":"<p>Retrieve only running jobs using the <code class=\"highlighter-rouge\">:filter</code> option:</p>","code":"\nrequire \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\nrunning_jobs = bigquery.jobs filter: \"running\""},{"caption":"<p>With pagination: (See <a data-custom-type=\"bigquery/job/list#token\">Job::List#token</a>)</p>","code":"\nrequire \"gcloud\"\n\ngcloud = Gcloud.new\nbigquery = gcloud.bigquery\n\nall_jobs = []\ntmp_jobs = bigquery.jobs\nwhile tmp_jobs.any? do\n  tmp_jobs.each do |job|\n    all_jobs << job\n  end\n  # break loop if no more jobs available\n  break if tmp_jobs.token.nil?\n  # get the next group of jobs\n  tmp_jobs = bigquery.jobs token: tmp_jobs.token\nend"}]},"params":[{"name":"all","types":["Boolean"],"description":"Whether to display jobs owned by all users in the\nproject. The default is <code class=\"highlighter-rouge\">false</code>.","optional":true,"default":"nil","nullable":true},{"name":"token","types":["String"],"description":"A previously-returned page token representing part\nof the larger set of results to view.","optional":true,"default":"nil","nullable":true},{"name":"max","types":["Integer"],"description":"Maximum number of jobs to return.","optional":true,"default":"nil","nullable":true},{"name":"filter","types":["String"],"description":"A filter for job state.</p>\n\n<p>Acceptable values are:\n* <code class=\"highlighter-rouge\">done</code> - Finished jobs\n* <code class=\"highlighter-rouge\">pending</code> - Pending jobs\n* <code class=\"highlighter-rouge\">running</code> - Running jobs","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"bigquery/job\">Gcloud::Bigquery::Job</a>&gt;"],"description":"(See\n<a data-custom-type=\"bigquery/job/list\">Gcloud::Bigquery::Job::List</a>)"}]}]}