{"id":"storage","metadata":{"name":"Storage","description":"<h1 id=\"google-cloud-storage\">Google Cloud Storage</h1>\n\n<p>Google Cloud Storage is an Internet service to store data in Google’s cloud.\nIt allows world-wide storage and retrieval of any amount of data and at any\ntime, taking advantage of Google’s own reliable and fast networking\ninfrastructure to perform data operations in a cost effective manner.</p>\n\n<p>Gcloud’s goal is to provide a API that is familiar and comfortable to\nRubyists. Authentication is handled by Gcloud#storage. You can provide the\nproject and credential information to connect to the Storage service, or if\nyou are running on Google Compute Engine this configuration is taken care\nof for you.</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span> <span class=\"s2\">\"my-todo-project\"</span><span class=\"p\">,</span>\n                    <span class=\"s2\">\"/path/to/keyfile.json\"</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-bucket\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"path/to/my-file.ext\"</span>\n</code></pre>\n</div>\n\n<p>You can learn more about various options for connection on the\n<a href=\"../AUTHENTICATION\">Authentication Guide</a>.</p>\n\n<p>To learn more about Cloud Storage, read the\n<a href=\"https://cloud.google.com/storage/docs/overview\">Google Cloud Storage Overview\n</a>.</p>\n\n<h2 id=\"retrieving-buckets\">Retrieving Buckets</h2>\n\n<p>A Bucket is the container for your data. There is no limit on the number of\nbuckets that you can create in a project. You can use buckets to organize\nand control access to your data. Each bucket has a unique name, which is how\nthey are retrieved: (See Project#bucket)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n</code></pre>\n</div>\n\n<p>You can also retrieve all buckets on a project: (See Project#buckets)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">all_buckets</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">buckets</span>\n</code></pre>\n</div>\n\n<p>If you have a significant number of buckets, you may need to paginate\nthrough them: (See Bucket::List#token)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">all_buckets</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"n\">tmp_buckets</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">buckets</span>\n<span class=\"k\">while</span> <span class=\"n\">tmp_buckets</span><span class=\"p\">.</span><span class=\"nf\">any?</span> <span class=\"k\">do</span>\n  <span class=\"n\">tmp_buckets</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">bucket</span><span class=\"o\">|</span>\n    <span class=\"n\">all_buckets</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">bucket</span>\n  <span class=\"k\">end</span>\n  <span class=\"c1\"># break loop if no more buckets available</span>\n  <span class=\"k\">break</span> <span class=\"k\">if</span> <span class=\"n\">tmp_buckets</span><span class=\"p\">.</span><span class=\"nf\">token</span><span class=\"p\">.</span><span class=\"nf\">nil?</span>\n  <span class=\"c1\"># get the next group of buckets</span>\n  <span class=\"n\">tmp_buckets</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">buckets</span> <span class=\"ss\">token: </span><span class=\"n\">tmp_buckets</span><span class=\"p\">.</span><span class=\"nf\">token</span>\n<span class=\"k\">end</span>\n</code></pre>\n</div>\n\n<h2 id=\"creating-a-bucket\">Creating a Bucket</h2>\n\n<p>A unique name is all that is needed to create a new bucket:\n(See Project#create_bucket)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">create_bucket</span> <span class=\"s2\">\"my-todo-app-attachments\"</span>\n</code></pre>\n</div>\n\n<h2 id=\"retrieving-files\">Retrieving Files</h2>\n\n<p>A File is an individual pieces of data that you store in Google Cloud\nStorage. Files contain the data stored as well as metadata describing the\ndata. Files belong to a bucket and cannot be shared among buckets. There is\nno limit on the number of objects that you can create in a bucket.</p>\n\n<p>Files are retrieved by their name, which is the path of the file in the\nbucket: (See Bucket#file)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n</code></pre>\n</div>\n\n<p>You can also retrieve all files in a bucket: (See Bucket#files)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">all_files</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">files</span>\n</code></pre>\n</div>\n\n<p>Or you can retrieve all files in a specified path:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">avatar_files</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">files</span> <span class=\"ss\">prefix: </span><span class=\"s2\">\"avatars/\"</span>\n</code></pre>\n</div>\n\n<p>If you have a significant number of files, you may need to paginate through\nthem: (See File::List#token)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n\n<span class=\"n\">all_files</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n<span class=\"n\">tmp_files</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">files</span>\n<span class=\"k\">while</span> <span class=\"n\">tmp_files</span><span class=\"p\">.</span><span class=\"nf\">any?</span> <span class=\"k\">do</span>\n  <span class=\"n\">tmp_files</span><span class=\"p\">.</span><span class=\"nf\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">file</span><span class=\"o\">|</span>\n    <span class=\"n\">all_files</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">file</span>\n  <span class=\"k\">end</span>\n  <span class=\"c1\"># break loop if no more files available</span>\n  <span class=\"k\">break</span> <span class=\"k\">if</span> <span class=\"n\">tmp_files</span><span class=\"p\">.</span><span class=\"nf\">token</span><span class=\"p\">.</span><span class=\"nf\">nil?</span>\n  <span class=\"c1\"># get the next group of files</span>\n  <span class=\"n\">tmp_files</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">files</span> <span class=\"ss\">token: </span><span class=\"n\">tmp_files</span><span class=\"p\">.</span><span class=\"nf\">token</span>\n<span class=\"k\">end</span>\n</code></pre>\n</div>\n\n<h2 id=\"creating-a-file\">Creating a File</h2>\n\n<p>A new File can be uploaded by specifying the location of a file on the local\nfile system, and the name/path that the file should be stored in the bucket.\n(See Bucket#create_file)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">create_file</span> <span class=\"s2\">\"/var/todo-app/avatars/heidi/400x400.png\"</span><span class=\"p\">,</span>\n                   <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n</code></pre>\n</div>\n\n<h3 id=\"a-note-about-large-uploads\">A note about large uploads</h3>\n\n<p>You may encounter a Broken pipe (Errno::EPIPE) error when attempting to\nupload large files. To avoid this problem, add the\n<a href=\"https://rubygems.org/gems/httpclient\">httpclient</a> gem to your project, and\nthe line (or lines) of configuration shown below. These lines must execute\nafter you require gcloud but before you make your first gcloud connection.\nThe first statement configures <a href=\"https://rubygems.org/gems/faraday\">Faraday</a>\nto use httpclient. The second statement, which should only be added if you\nare using a version of Faraday at or above 0.9.2, is a workaround for <a href=\"https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/367\">this\ngzip issue</a>.</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"c1\"># Use httpclient to avoid broken pipe errors with large uploads</span>\n<span class=\"no\">Faraday</span><span class=\"p\">.</span><span class=\"nf\">default_adapter</span> <span class=\"o\">=</span> <span class=\"ss\">:httpclient</span>\n\n<span class=\"c1\"># Only add the following statement if using Faraday &gt;= 0.9.2</span>\n<span class=\"c1\"># Override gzip middleware with no-op for httpclient</span>\n<span class=\"no\">Faraday</span><span class=\"o\">::</span><span class=\"no\">Response</span><span class=\"p\">.</span><span class=\"nf\">register_middleware</span> <span class=\"ss\">:gzip</span> <span class=\"o\">=&gt;</span>\n                                        <span class=\"no\">Faraday</span><span class=\"o\">::</span><span class=\"no\">Response</span><span class=\"o\">::</span><span class=\"no\">Middleware</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n</code></pre>\n</div>\n\n<h2 id=\"downloading-a-file\">Downloading a File</h2>\n\n<p>Files can be downloaded to the local file system. (See File#download)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n<span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">download</span> <span class=\"s2\">\"/var/todo-app/avatars/heidi/400x400.png\"</span>\n</code></pre>\n</div>\n\n<h2 id=\"using-signed-urls\">Using Signed URLs</h2>\n\n<p>Access without authentication can be granted to a File for a specified\nperiod of time. This URL uses a cryptographic signature\nof your credentials to access the file. (See File#signed_url)</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n<span class=\"n\">shared_url</span> <span class=\"o\">=</span> <span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">signed_url</span> <span class=\"ss\">method: </span><span class=\"s2\">\"GET\"</span><span class=\"p\">,</span>\n                             <span class=\"ss\">expires: </span><span class=\"mi\">300</span> <span class=\"c1\"># 5 minutes from now</span>\n</code></pre>\n</div>\n\n<h2 id=\"controlling-access-to-a-bucket\">Controlling Access to a Bucket</h2>\n\n<p>Access to a bucket is controlled with Bucket#acl. A bucket has owners,\nwriters, and readers. Permissions can be granted to an individual user’s\nemail address, a group’s email address, as well as many predefined lists.\nSee the\n<a href=\"https://cloud.google.com/storage/docs/access-control\">Access Control guide</a>\nfor more.</p>\n\n<p>Access to a bucket can be granted to a user by appending <code class=\"highlighter-rouge\">\"user-\"</code> to the\nemail address:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n\n<span class=\"n\">email</span> <span class=\"o\">=</span> <span class=\"s2\">\"heidi@example.net\"</span>\n<span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">acl</span><span class=\"p\">.</span><span class=\"nf\">add_reader</span> <span class=\"s2\">\"user-</span><span class=\"si\">#{</span><span class=\"n\">email</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n</code></pre>\n</div>\n\n<p>Access to a bucket can be granted to a group by appending <code class=\"highlighter-rouge\">\"group-\"</code> to the\nemail address:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n\n<span class=\"n\">email</span> <span class=\"o\">=</span> <span class=\"s2\">\"authors@example.net\"</span>\n<span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">acl</span><span class=\"p\">.</span><span class=\"nf\">add_reader</span> <span class=\"s2\">\"group-</span><span class=\"si\">#{</span><span class=\"n\">email</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n</code></pre>\n</div>\n\n<p>Access to a bucket can also be granted to a predefined list of permissions:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n\n<span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">acl</span><span class=\"p\">.</span><span class=\"nf\">public!</span>\n</code></pre>\n</div>\n\n<h2 id=\"controlling-access-to-a-file\">Controlling Access to a File</h2>\n\n<p>Access to a file is controlled in two ways, either by the setting the\ndefault permissions to all files in a bucket with Bucket#default_acl, or by\nsetting permissions to an individual file with File#acl.</p>\n\n<p>Access to a file can be granted to a user by appending <code class=\"highlighter-rouge\">\"user-\"</code> to the\nemail address:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n\n<span class=\"n\">email</span> <span class=\"o\">=</span> <span class=\"s2\">\"heidi@example.net\"</span>\n<span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">acl</span><span class=\"p\">.</span><span class=\"nf\">add_reader</span> <span class=\"s2\">\"user-</span><span class=\"si\">#{</span><span class=\"n\">email</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n</code></pre>\n</div>\n\n<p>Access to a file can be granted to a group by appending <code class=\"highlighter-rouge\">\"group-\"</code> to the\nemail address:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n\n<span class=\"n\">email</span> <span class=\"o\">=</span> <span class=\"s2\">\"authors@example.net\"</span>\n<span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">acl</span><span class=\"p\">.</span><span class=\"nf\">add_reader</span> <span class=\"s2\">\"group-</span><span class=\"si\">#{</span><span class=\"n\">email</span><span class=\"si\">}</span><span class=\"s2\">\"</span>\n</code></pre>\n</div>\n\n<p>Access to a file can also be granted to a predefined list of permissions:</p>\n\n<div class=\"highlighter-rouge\"><pre class=\"ruby\"><code><span class=\"nb\">require</span> <span class=\"s2\">\"gcloud\"</span>\n\n<span class=\"n\">gcloud</span> <span class=\"o\">=</span> <span class=\"no\">Gcloud</span><span class=\"p\">.</span><span class=\"nf\">new</span>\n<span class=\"n\">storage</span> <span class=\"o\">=</span> <span class=\"n\">gcloud</span><span class=\"p\">.</span><span class=\"nf\">storage</span>\n\n<span class=\"n\">bucket</span> <span class=\"o\">=</span> <span class=\"n\">storage</span><span class=\"p\">.</span><span class=\"nf\">bucket</span> <span class=\"s2\">\"my-todo-app\"</span>\n<span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"n\">bucket</span><span class=\"p\">.</span><span class=\"nf\">file</span> <span class=\"s2\">\"avatars/heidi/400x400.png\"</span>\n\n<span class=\"n\">file</span><span class=\"p\">.</span><span class=\"nf\">acl</span><span class=\"p\">.</span><span class=\"nf\">public!</span>\n</code></pre>\n</div>","source":"lib/gcloud/storage.rb#L402","resources":[],"examples":[]},"methods":[]}