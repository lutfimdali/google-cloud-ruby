<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Gcloud::Storage &mdash; Gcloud Documentation</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//googlecloudplatform.github.io/gcloud-ruby/css/normalize.css">
    <link rel="stylesheet" href="//googlecloudplatform.github.io/gcloud-ruby/css/main.css">
    <script src="//googlecloudplatform.github.io/gcloud-ruby/js/vendor/modernizr-2.6.2.min.js"></script>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono|Roboto:300,400,700,700italic,400italic|Open+Sans:300' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">
  </head>

  <body class="lang-page">
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <header class="page-header fixed" role="banner">
      <h1 class="logo">
        <a href="//googlecloudplatform.github.io/gcloud-ruby/" title="back to home">
          <img src="//googlecloudplatform.github.io/gcloud-ruby/img/logo.svg" alt="Google Cloud Platform">
          <span class="gcloud">gcloud</span>
        </a>
      </h1>

      <nav class="main-nav">
        <div class="nav-current">Ruby</div>
        <ul class="menu">
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-java/" title="gcloud-java">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-java.svg" alt="Java icon" class="menu-icon" />
              Java
            </a>
          </li>
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-node/#/docs" title="gcloud-node">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon">
              Node.js
            </a>
          </li>
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-python/latest/" title="gcloud-python">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-python.svg" alt="Python icon" class="menu-icon">
              Python
            </a>
          </li>
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-ruby/" title="gcloud-ruby">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" width="24">
              Ruby
            </a>
          </li>
        </ul>
      </nav>

      <div class="github-issue">
        <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn">
          <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-github.svg" />
          Report an Issue
        </a>
      </div>
    </header>

    <article class="main lang-page" role="main">

      <header class="docs-header">
        <h1 class="page-title">Gcloud::Storage</h1>
      </header>

      <section class="content">

        <div id="description" class="description">
          <h1 id="google-cloud-storage">Google Cloud Storage</h1>

<p>Google Cloud Storage is an Internet service to store data in Google’s cloud.
It allows world-wide storage and retrieval of any amount of data and at any
time, taking advantage of Google’s own reliable and fast networking
infrastructure to perform data operations in a cost effective manner.</p>

<p>Gcloud’s goal is to provide a API that is familiar and comfortable to
Rubyists. Authentication is handled by Gcloud#storage. You can provide the
project and credential information to connect to the Storage service, or if
you are running on Google Compute Engine this configuration is taken care
of for you.</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span> <span class="s2">"my-todo-project"</span><span class="p">,</span>
                    <span class="s2">"/path/to/keyfile.json"</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-bucket"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"path/to/my-file.ext"</span>
</code></pre>
</div>

<p>You can learn more about various options for connection on the
<a href="../AUTHENTICATION">Authentication Guide</a>.</p>

<p>To learn more about Cloud Storage, read the
<a href="https://cloud.google.com/storage/docs/overview">Google Cloud Storage Overview
</a>.</p>

<h2 id="retrieving-buckets">Retrieving Buckets</h2>

<p>A Bucket is the container for your data. There is no limit on the number of
buckets that you can create in a project. You can use buckets to organize
and control access to your data. Each bucket has a unique name, which is how
they are retrieved: (See Project#bucket)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
</code></pre>
</div>

<p>You can also retrieve all buckets on a project: (See Project#buckets)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">all_buckets</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">buckets</span>
</code></pre>
</div>

<p>If you have a significant number of buckets, you may need to paginate
through them: (See Bucket::List#token)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">all_buckets</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">tmp_buckets</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">buckets</span>
<span class="k">while</span> <span class="n">tmp_buckets</span><span class="p">.</span><span class="nf">any?</span> <span class="k">do</span>
  <span class="n">tmp_buckets</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">bucket</span><span class="o">|</span>
    <span class="n">all_buckets</span> <span class="o">&lt;&lt;</span> <span class="n">bucket</span>
  <span class="k">end</span>
  <span class="c1"># break loop if no more buckets available</span>
  <span class="k">break</span> <span class="k">if</span> <span class="n">tmp_buckets</span><span class="p">.</span><span class="nf">token</span><span class="p">.</span><span class="nf">nil?</span>
  <span class="c1"># get the next group of buckets</span>
  <span class="n">tmp_buckets</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">buckets</span> <span class="ss">token: </span><span class="n">tmp_buckets</span><span class="p">.</span><span class="nf">token</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="creating-a-bucket">Creating a Bucket</h2>

<p>A unique name is all that is needed to create a new bucket:
(See Project#create_bucket)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">create_bucket</span> <span class="s2">"my-todo-app-attachments"</span>
</code></pre>
</div>

<h2 id="retrieving-files">Retrieving Files</h2>

<p>A File is an individual pieces of data that you store in Google Cloud
Storage. Files contain the data stored as well as metadata describing the
data. Files belong to a bucket and cannot be shared among buckets. There is
no limit on the number of objects that you can create in a bucket.</p>

<p>Files are retrieved by their name, which is the path of the file in the
bucket: (See Bucket#file)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"avatars/heidi/400x400.png"</span>
</code></pre>
</div>

<p>You can also retrieve all files in a bucket: (See Bucket#files)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">all_files</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">files</span>
</code></pre>
</div>

<p>Or you can retrieve all files in a specified path:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">avatar_files</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">files</span> <span class="ss">prefix: </span><span class="s2">"avatars/"</span>
</code></pre>
</div>

<p>If you have a significant number of files, you may need to paginate through
them: (See File::List#token)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>

<span class="n">all_files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">tmp_files</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">files</span>
<span class="k">while</span> <span class="n">tmp_files</span><span class="p">.</span><span class="nf">any?</span> <span class="k">do</span>
  <span class="n">tmp_files</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
    <span class="n">all_files</span> <span class="o">&lt;&lt;</span> <span class="n">file</span>
  <span class="k">end</span>
  <span class="c1"># break loop if no more files available</span>
  <span class="k">break</span> <span class="k">if</span> <span class="n">tmp_files</span><span class="p">.</span><span class="nf">token</span><span class="p">.</span><span class="nf">nil?</span>
  <span class="c1"># get the next group of files</span>
  <span class="n">tmp_files</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">files</span> <span class="ss">token: </span><span class="n">tmp_files</span><span class="p">.</span><span class="nf">token</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="creating-a-file">Creating a File</h2>

<p>A new File can be uploaded by specifying the location of a file on the local
file system, and the name/path that the file should be stored in the bucket.
(See Bucket#create_file)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">bucket</span><span class="p">.</span><span class="nf">create_file</span> <span class="s2">"/var/todo-app/avatars/heidi/400x400.png"</span><span class="p">,</span>
                   <span class="s2">"avatars/heidi/400x400.png"</span>
</code></pre>
</div>

<h3 id="a-note-about-large-uploads">A note about large uploads</h3>

<p>You may encounter a Broken pipe (Errno::EPIPE) error when attempting to
upload large files. To avoid this problem, add the
<a href="https://rubygems.org/gems/httpclient">httpclient</a> gem to your project, and
the line (or lines) of configuration shown below. These lines must execute
after you require gcloud but before you make your first gcloud connection.
The first statement configures <a href="https://rubygems.org/gems/faraday">Faraday</a>
to use httpclient. The second statement, which should only be added if you
are using a version of Faraday at or above 0.9.2, is a workaround for <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/367">this
gzip issue</a>.</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="c1"># Use httpclient to avoid broken pipe errors with large uploads</span>
<span class="no">Faraday</span><span class="p">.</span><span class="nf">default_adapter</span> <span class="o">=</span> <span class="ss">:httpclient</span>

<span class="c1"># Only add the following statement if using Faraday &gt;= 0.9.2</span>
<span class="c1"># Override gzip middleware with no-op for httpclient</span>
<span class="no">Faraday</span><span class="o">::</span><span class="no">Response</span><span class="p">.</span><span class="nf">register_middleware</span> <span class="ss">:gzip</span> <span class="o">=&gt;</span>
                                        <span class="no">Faraday</span><span class="o">::</span><span class="no">Response</span><span class="o">::</span><span class="no">Middleware</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>
</code></pre>
</div>

<h2 id="downloading-a-file">Downloading a File</h2>

<p>Files can be downloaded to the local file system. (See File#download)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"avatars/heidi/400x400.png"</span>
<span class="n">file</span><span class="p">.</span><span class="nf">download</span> <span class="s2">"/var/todo-app/avatars/heidi/400x400.png"</span>
</code></pre>
</div>

<h2 id="using-signed-urls">Using Signed URLs</h2>

<p>Access without authentication can be granted to a File for a specified
period of time. This URL uses a cryptographic signature
of your credentials to access the file. (See File#signed_url)</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"avatars/heidi/400x400.png"</span>
<span class="n">shared_url</span> <span class="o">=</span> <span class="n">file</span><span class="p">.</span><span class="nf">signed_url</span> <span class="ss">method: </span><span class="s2">"GET"</span><span class="p">,</span>
                             <span class="ss">expires: </span><span class="mi">300</span> <span class="c1"># 5 minutes from now</span>
</code></pre>
</div>

<h2 id="controlling-access-to-a-bucket">Controlling Access to a Bucket</h2>

<p>Access to a bucket is controlled with Bucket#acl. A bucket has owners,
writers, and readers. Permissions can be granted to an individual user’s
email address, a group’s email address, as well as many predefined lists.
See the
<a href="https://cloud.google.com/storage/docs/access-control">Access Control guide</a>
for more.</p>

<p>Access to a bucket can be granted to a user by appending <code class="highlighter-rouge">"user-"</code> to the
email address:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>

<span class="n">email</span> <span class="o">=</span> <span class="s2">"heidi@example.net"</span>
<span class="n">bucket</span><span class="p">.</span><span class="nf">acl</span><span class="p">.</span><span class="nf">add_reader</span> <span class="s2">"user-</span><span class="si">#{</span><span class="n">email</span><span class="si">}</span><span class="s2">"</span>
</code></pre>
</div>

<p>Access to a bucket can be granted to a group by appending <code class="highlighter-rouge">"group-"</code> to the
email address:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>

<span class="n">email</span> <span class="o">=</span> <span class="s2">"authors@example.net"</span>
<span class="n">bucket</span><span class="p">.</span><span class="nf">acl</span><span class="p">.</span><span class="nf">add_reader</span> <span class="s2">"group-</span><span class="si">#{</span><span class="n">email</span><span class="si">}</span><span class="s2">"</span>
</code></pre>
</div>

<p>Access to a bucket can also be granted to a predefined list of permissions:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>

<span class="n">bucket</span><span class="p">.</span><span class="nf">acl</span><span class="p">.</span><span class="nf">public!</span>
</code></pre>
</div>

<h2 id="controlling-access-to-a-file">Controlling Access to a File</h2>

<p>Access to a file is controlled in two ways, either by the setting the
default permissions to all files in a bucket with Bucket#default_acl, or by
setting permissions to an individual file with File#acl.</p>

<p>Access to a file can be granted to a user by appending <code class="highlighter-rouge">"user-"</code> to the
email address:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"avatars/heidi/400x400.png"</span>

<span class="n">email</span> <span class="o">=</span> <span class="s2">"heidi@example.net"</span>
<span class="n">file</span><span class="p">.</span><span class="nf">acl</span><span class="p">.</span><span class="nf">add_reader</span> <span class="s2">"user-</span><span class="si">#{</span><span class="n">email</span><span class="si">}</span><span class="s2">"</span>
</code></pre>
</div>

<p>Access to a file can be granted to a group by appending <code class="highlighter-rouge">"group-"</code> to the
email address:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"avatars/heidi/400x400.png"</span>

<span class="n">email</span> <span class="o">=</span> <span class="s2">"authors@example.net"</span>
<span class="n">file</span><span class="p">.</span><span class="nf">acl</span><span class="p">.</span><span class="nf">add_reader</span> <span class="s2">"group-</span><span class="si">#{</span><span class="n">email</span><span class="si">}</span><span class="s2">"</span>
</code></pre>
</div>

<p>Access to a file can also be granted to a predefined list of permissions:</p>

<div class="highlighter-rouge"><pre class="ruby"><code><span class="nb">require</span> <span class="s2">"gcloud"</span>

<span class="n">gcloud</span> <span class="o">=</span> <span class="no">Gcloud</span><span class="p">.</span><span class="nf">new</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">gcloud</span><span class="p">.</span><span class="nf">storage</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">storage</span><span class="p">.</span><span class="nf">bucket</span> <span class="s2">"my-todo-app"</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">bucket</span><span class="p">.</span><span class="nf">file</span> <span class="s2">"avatars/heidi/400x400.png"</span>

<span class="n">file</span><span class="p">.</span><span class="nf">acl</span><span class="p">.</span><span class="nf">public!</span>
</code></pre>
</div>

        </div>

        <div class="section-links">
          

          
          

          
        </div>

        
      </section>

      <nav class="side-nav">

        <div class="side-nav--meta"><div id="doc-build-date">Docs built on Feb 03, 2016.</div></div><ul><h4 class="list-item--heading">Getting Started</h4><li class='toc-l0'><a class='reference internal' href='../index.html'>Overview</a></li><li class='toc-l0'><a class='reference internal' href='../AUTHENTICATION.html'>Authentication Guide</a></li></ul><ul><h4 class="list-item--heading">API</h4><li class='toc-l0'><a class='reference internal' href='../Gcloud.html'>Gcloud</a></li><li class='toc-l0'><a class='reference internal' href='Bigquery.html'>BigQuery</a></li><li class='toc-l0'><a class='reference internal' href='Datastore.html'>Datastore</a></li><li class='toc-l0'><a class='reference internal' href='Dns.html'>DNS</a></li><li class='toc-l0'><a class='reference internal' href='Logging.html'>Logging</a></li><li class='toc-l0'><a class='reference internal' href='Pubsub.html'>Pub/Sub</a></li><li class='toc-l0'><a class='reference internal' href='ResourceManager.html'>Resource Manager</a></li><li class='toc-l0'><a class='reference internal' href='Search.html'>Search</a></li><li class='toc-l0'><a class='reference internal current' href=''>Storage</a></li><li class='toc-l1'><a class='reference internal' href='Storage/Project.html'>Project</a></li><li class='toc-l1'><a class='reference internal' href='Storage/Bucket.html'>Bucket</a></li><li class='toc-l1'><a class='reference internal' href='Storage/File.html'>File</a></li><li class='toc-l0'><a class='reference internal' href='../reference.html'>API Reference</a></li></ul>

        <ul class="external-links">
          <li>
            <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby" title="Github repository">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
              Github
            </a>
          </li>
          <li>
            <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues" title="Issues on Github">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-issues.svg" alt="Issues icon">
              Issues
            </a>
          </li>
          <li>
            <a href="http://stackoverflow.com/questions/tagged/gcloud-ruby" title="gcloud on StackOverflow">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon">
              StackOverflow
            </a>
          </li>
          <li>
            <a href="http://rubygems.org/gems/gcloud" title="RubyGems" class="ext-link">
               <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-rubygems.svg" alt="RubyGems icon">
              RubyGems
            </a>
          </li>
        </ul>

      </nav>

    </article>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script ="//googlecloudplatform.github.io/gcloud-ruby/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
    <script src="//googlecloudplatform.github.io/gcloud-ruby/js/plugins.js"></script>
    <script src="//googlecloudplatform.github.io/gcloud-ruby/js/main.js"></script>

    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-49880327-13');ga('send','pageview');
    </script>

  </body>
</html>
